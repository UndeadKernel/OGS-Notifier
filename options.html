<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
        <script type="text/javascript" src="functions.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" />


        <div class='content-wrapper'>


            <img src='http://www.online-go.com/images/logo/main_logo.png' alt='ogs logo' />

            <div>
                <input id='include_viewed' type='checkbox' onclick="updateViewed(this.checked);" />
                include viewed games in count<sup>[<a href="javascript:$('#viewed-help').toggle()">?</a>]</sup>
            </div>

            <p class='help' id='viewed-help'>
            The notifier shows the number of games where it is your turn to
            move and the game has not been viewed (i.e. on the mygames page,
            the board link appears in bold text).  This option includes all
            games where it is your turn to move, whether viewed or not.
            </p>

            <div>
                <input id='display-zero' type='checkbox' onclick="updateDisplayZero(this.checked);" />
                display '0' for no games to move<sup>[<a href="javascript:$('#display-help').toggle()">?</a>]</sup>
            </div>

            <p class='help' id='display-help'>
            If it is not your turn in any games, the notifier shows a number
            zero in the red badge if this checkbox is selected, or no badge at
            all if it is not.
            </p>

            <hr>

            <p>
            Site URL<sup>[<a href="javascript:$('#url-help').toggle()">?</a>]</sup>
            </p>

            <p class='help' id='url-help'>
            You can select one of the following URLs to use as your primary login URL.  If you don't know what this means,
            just leave it set on 'http://www.online-go.com'.
            </p>

            <table>

                <tr>
                    <td>
                        <input name='url' type='radio' id='wwwcom' onclick="updateURL('http://www.online-go.com');" /> http://www.online-go.com
                    </td>
                </tr>

                <tr>
                    <td>
                        <input name='url' type='radio' id='wwworg' onclick="updateURL('http://www.online-go.org');" /> http://www.online-go.org
                    </td>
                </tr>

                <tr>
                    <td>
                        <input name='url' type='radio' id='com'    onclick="updateURL('http://online-go.com');" /> http://online-go.com
                    </td>
                </tr>

                <tr>
                    <td>
                        <input name='url' type='radio' id='org'    onclick="updateURL('http://online-go.org');" /> http://online-go.org
                    </td>
                </tr>
            </table>

            <hr>

            <p>
            Update Interval<sup>[<a href="javascript:$('#interval-help').toggle()">?</a>]</sup>
            </p>

            <p class='help' id='interval-help'>
            Selects how often the extension updates the number of games.
            </p>



            <table>
                <tr>
                    <td>
                        <input id='int20' name='interval' type='radio' onclick="updateInterval(20000)" /> Twenty Seconds
                    </td>
                </tr>
                <tr>
                    <td>
                        <input id='int60' name='interval' type='radio' onclick="updateInterval(60000)" /> One Minute
                    </td>
                </tr>
                <tr>
                    <td>
                        <input id='int300' name='interval' type='radio' onclick="updateInterval(300000)" /> Five Minutes
                    </td>
                </tr>
            </table>

        </div>

        <script>
            // When page initially loads, set the proper 'include-viewed' selection
            if (localStorage['include_viewed'] == 'true')  {
                $('#include_viewed').prop('checked', true);
            }

            // When page initially loads, set the proper interval selection
            switch(localStorage['interval']) {
                case 20000:
                $('#int20').prop('checked', true);
                break;

                case 300000:
                $('#int300').prop('checked', true);
                break;

                case 60000:
                default:
                $('#int60').prop('checked', true);
                break;
            }

            // When the page initially loads, select the appropriate base url
            switch(localStorage['url']) {
                case 'http://www.online-go.org':
                $('#wwworg').prop('checked', true);
                break;

                case 'http://online-go.com':
                $('#com').prop('checked', true);
                break;

                case 'http://online-go.org':
                $('#org').prop('checked', true);
                break;

                case 'http://www.online-go.com':
                default:
                $('#wwwcom').prop('checked', true);
            }

            // update the interval setting
            function updateInterval(interval) {
                localStorage['interval'] = interval;

                performUpdate();
            }

            // update the base url setting
            function updateURL(url) {
                localStorage['url'] = url;

                performUpdate();
            }

            // update the viewed option
            function updateViewed(val) {
                localStorage['include_viewed'] = val;
                performUpdate();
            }

            // update the display zeros option
            function updateDisplayZero(val) {
                localStorage['display_zero'] = val;
                performUpdate();
            }

            function performUpdate() {

                // There's a timer running: invalidate it, so that update() can start a new one
                if (localStorage['timeout-id'] !== '') {
                invalidateCurrentTimer();
            }

            update();
        }

    </script>

</head>
</html>
