<html>
	<head>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
        <script type="text/javascript" src="functions.js"></script>

        <style type="text/css">
            body {
                background-color: #257;
            }

            .content-wrapper {
                display:table;
                margin: 10px auto;
                padding: 10px;
                background-color: #47A;
                border: 1px solid #CCC;
                width: 300px;
            }

            img {
                display:block;
                text-align:center;
                margin: 0 auto 10px;
            }

            input {
                margin: 0;
                padding: 0;
            }

            .help {
                color: white;
                max-width: 300px;
                text-align: justify;
                display : none;
            }

            p {
                margin:0;
                padding:0;
            }

            a {
                color: #333;
            }


        </style>

        <div class='content-wrapper'>

            
            <img src='http://www.online-go.com/images/logo/main_logo.png' alt='ogs logo' />

            <input id='include_viewed' type='checkbox' onclick="localStorage['include_viewed'] = this.checked;" />
            include viewed games in count<sup>[<a href="javascript:$('#viewed-help').toggle()">?</a>]</sup>

        <p class='help' id='viewed-help'>
        The notifier shows the number of games where it is your turn to move and the game has not been viewed (i.e. on
        the mygames page, the board link appears in bold text).  This option includes all games where it is your turn to
        move, whether viewed or not.
        </p>

        <hr>

        <p>
        Site URL<sup>[<a href="javascript:$('#url-help').toggle()">?</a>]</sup>
        </p>

        <p class='help' id='url-help'>
        You can select one of the following URLs to use as your primary login URL.  If you don't know what this means,
        just leave it set on 'http://www.online-go.com'.
        </p>

        <table>

            <!--  TODO: REMOVE  -->
            <tr>
                <td>
                    <input name='url' type='radio' id='ogsguf' onclick="updateURL('http://ogs.guffin.info');" /> http://ogs.guffin.info
                </td>
            </tr>
            <!--  END TODO: REMOVE  -->


            <tr>
                <td>
                    <input name='url' type='radio' id='wwwcom' onclick="updateURL('http://www.online-go.com');" /> http://www.online-go.com
                </td>
            </tr>

            <tr>
                <td>
                    <input name='url' type='radio' id='wwworg' onclick="updateURL('http://www.online-go.org');" /> http://www.online-go.org
                </td>
            </tr>

            <tr>
                <td>
                    <input name='url' type='radio' id='com'    onclick="updateURL('http://online-go.com');" /> http://online-go.com
                </td>
            </tr>

            <tr>
                <td>
                    <input name='url' type='radio' id='org'    onclick="updateURL('http://online-go.org');" /> http://online-go.org
                </td>
            </tr>
        </table>
        
        <hr>

        <p>
        Update Interval<sup>[<a href="javascript:$('#interval-help').toggle()">?</a>]</sup>
        </p>

        <p class='help' id='interval-help'>
        Selects how often the extension updates the number of games.
        </p>



        <table>
            <tr>
                <td>
                    <input id='int20' name='interval' type='radio' onclick="updateInterval(20000)" /> Twenty Seconds
                </td>
            </tr>
            <tr>
                <td>
                    <input id='int60' name='interval' type='radio' onclick="updateInterval(60000)" /> One Minute
                </td>
            </tr>
            <tr>
                <td>
                    <input id='int300' name='interval' type='radio' onclick="updateInterval(300000)" /> Five Minutes
                </td>
            </tr>
        </table>

    </div>

        <script>
            // When page initially loads, set the proper 'include-viewed' selection
            if (localStorage['include_viewed'] == 'true')  {
                $('#include_viewed').prop('checked', true);
            }

            // When page initially loads, set the proper interval selection
            switch(localStorage['interval']) {
                case 20000:
                $('#int20').prop('checked', true);
                break;

                case 300000:
                $('#int300').prop('checked', true);
                break;

                case 60000:
                default:
                $('#int60').prop('checked', true);
                break;
            }

            // update the interval setting
            function updateInterval(interval) {
                localStorage['interval'] = interval;

                // There's a timer running: invalidate it, so that update() can start a new one
                if (localStorage['timeout-id'] !== '') {
                    invalidateCurrentTimer();
                }

                update();
            }

            // update the base url setting
            function updateURL(url) {
                localStorage['url'] = url;

                // There's a timer running: invalidate it, so that update() can start a new one
                if (localStorage['timeout-id'] !== '') {
                    invalidateCurrentTimer();
                }

                update();
            }

            // When the page initially loads, select the appropriate base url
            switch(localStorage['url']) {
               case 'http://www.online-go.org':
               $('#wwworg').prop('checked', true);
               break;

               // TODO: REMOVE
               case 'http://ogs.guffin.info':
               $('#ogsguf').prop('checked', true);
               break;

               case 'http://online-go.com':
               $('#com').prop('checked', true);
               break;

               case 'http://online-go.org':
               $('#org').prop('checked', true);
               break;

               case 'http://www.online-go.com':
               default:
               $('#wwwcom').prop('checked', true);
           }
           </script>

	</head>
</html>
