<html>
	<head>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
        <script type="text/javascript" src="functions.js"></script>


        <input id='include_viewed' type='checkbox' onclick="localStorage['include_viewed'] = this.checked;" /> include viewed games in count


        <table>

            <!--  TODO: REMOVE  -->
            <tr>
                <td>
                    <input name='url' type='radio' id='ogsguf' onclick="updateURL('http://ogs.guffin.info');" /> http://ogs.guffin.info
                </td>
            </tr>
            <!--  END TODO: REMOVE  -->


            <tr>
                <td>
                    <input name='url' type='radio' id='wwwcom' onclick="updateURL('http://www.online-go.com');" /> http://www.online-go.com
                </td>
            </tr>

            <tr>
                <td>
                    <input name='url' type='radio' id='wwworg' onclick="updateURL('http://www.online-go.org');" /> http://www.online-go.org
                </td>
            </tr>

            <tr>
                <td>
                    <input name='url' type='radio' id='com'    onclick="updateURL('http://online-go.com');" /> http://online-go.com
                </td>
            </tr>

            <tr>
                <td>
                    <input name='url' type='radio' id='org'    onclick="updateURL('http://online-go.org');" /> http://online-go.org
                </td>
            </tr>
        </table>


        <table>
            <tr>
                <td>
                    <input id='int20' name='interval' type='radio' onclick="updateInterval(20000)" /> Twenty Seconds
                </td>
            </tr>
            <tr>
                <td>
                    <input id='int60' name='interval' type='radio' onclick="updateInterval(60000)" /> One Minute
                </td>
            </tr>
            <tr>
                <td>
                    <input id='int300' name='interval' type='radio' onclick="updateInterval(300000)" /> Five Minutes
                </td>
            </tr>
        </table>

        <script>
            // When page initially loads, set the proper 'include-viewed' selection
            if (localStorage['include_viewed'] == 'on')  {
                $('#include_viewed').click();
            }

            // When page initially loads, set the proper interval selection
            switch(localStorage['interval']) {
                case 20000:
                $('#int20').click();
                break;
                case 300000:
                $('#int300').click();
                break;
                case 60000:
                default:
                $('#int60').click();
                break;
            }

            // update the interval setting
            function updateInterval(timeout) {
                localStorage['interval'] = timeout;

                // if there's a timer running, stop it and start a new one
                if (localStorage['timeout-id'] != 0) {
                    console.log("Clearing old timer: " + localStorage['timeout-id']);
                    clearTimeout(localStorage['timeout-id']);
                }

                update();
            }

            // update the base url setting
            function updateURL(url) {
                localStorage['url'] = url;

                // there's a timer running
                if (localStorage['timeout-id'] != 0) {
                    clearTimeout(localStorage['timeout-id']);
                }

                update();
            }

            // When the page initially loads, select the appropriate base url
            switch(localStorage['url']) {
               case 'http://www.online-go.org':
               $('#wwworg').click();
               break;

               // TODO: REMOVE
               case 'http://ogs.guffin.info':
               $('#ogsguf').click();
               break;

               case 'http://online-go.com':
               $('#com').click();
               break;

               case 'http://online-go.org':
               $('#org').click();
               break;

               case 'http://www.online-go.com':
               default:
               $('#wwwcom').click();
           }
           </script>

	</head>
</html>
